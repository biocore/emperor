<!--
/**
 *
 * @author Yoshiki Vazquez Baeza
 * @copyright Copyright 2013, The Emperor Project
 * @credits Yoshiki Vazquez Baeza
 * @license BSD
 * @version 0.9.3-dev
 * @maintainer Yoshiki Vazquez Baeza
 * @email yoshiki89@gmail.com
 * @status Development
 *
 */
-->

<!DOCTYPE html>
<html>
<head>
  <!--
      Note that all of the resources listed in this file assume the standard
      base structure of Emperor. It is likely that this will not work properly
      if it's not executed as suggested.
  -->
  <title>Emperor test suite</title>
  <link rel="stylesheet" href="qunit/qunit-min.css" type="text/css" media="screen">
  <link rel="stylesheet" type="text/css" href="../../emperor/support_files/vendor/css/slick.grid.min.css">

  <link rel="icon" href="../../emperor/support_files/img/favicon.ico">

  <!-- Testing framework requirements -->
  <script src="qunit/qunit-min.js"></script>

  <!-- Qunit depends on jQuery -->
  <script src="../../emperor/support_files/vendor/js/require-2.1.22.min.js"></script>

</head>
<body>
  <div id="qunit"></div>
  <div id="qunit-fixture">
    <div id="map-test">
      <div id="id1"></div>
      <div id="id2"></div>
    </div>
  </div>
  <br>
  <h1 class="qunit-header">Emperor Test Suite</h1>
  <p>
    This test suite exercises all the functions that are used as part of
    Emperor's front end. The functions that have direct interaction with the
    instantiation of the user interface are not tested.
  </p>
  <script>
    QUnit.config.autostart = false;

    // Without this setTimeout, the specs don't always get execute in webKit
    // browsers, this was taken from http://stackoverflow.com/q/13615679/379593
    setTimeout(function () {
      requirejs.config({
        'baseUrl': '../../emperor/support_files/',

        // the left side is the module name, and the right side is the path
        // relative to the baseUrl attribute, do NOT include the .js extension
        'paths': {
          /* jQuery */
          'jquery': './vendor/js/jquery-2.1.4.min',
          'jqueryui': './vendor/js/jquery-ui.min',
          'jquery_drag': './vendor/js/jquery.event.drag-2.2.min',

          /* jQuery plugins */
          'chosen': './vendor/js/chosen.jquery.min',
          'spectrum': './vendor/js/spectrum.min',
          'position': './vendor/js/jquery.ui.position.min',
          'contextmenu': './vendor/js/jquery.contextMenu.min',

          /* other libraries */
          'underscore': './vendor/js/underscore-min',
          'chroma': './vendor/js/chroma.min',
          'd3': './vendor/js/d3.min',
          'filesaver': './vendor/js/FileSaver.min',
          'blob': './vendor/js/Blob',

          /* THREE.js and plugins */
          'three': './vendor/js/three.min',
          'orbitcontrols': './vendor/js/three.js-plugins/OrbitControls',
          'projector': './vendor/js/three.js-plugins/Projector',
          'svgrenderer': './vendor/js/three.js-plugins/SVGRenderer',

          /* SlickGrid */
          'slickcore': './vendor/js/slick.core.min',
          'slickgrid': './vendor/js/slick.grid.min',
          'slickformatters': './vendor/js/slick.editors.min',
          'slickeditors': './vendor/js/slick.formatters.min',

          /* Emperor's objects */
          'animate': './js/animate',
          'color-editor': './js/color-editor',
          'colorviewcontroller': './js/color-view-controller',
          'scaleviewcontroller': './js/scale-view-controller',
          'axescontroller': './js/axes-controller',
          'scale-editor': './js/scale-editor',
          'controller': './js/controller',
          'draw': './js/draw',
          'model': './js/model',
          'scene3d': './js/sceneplotview3d',
          'trajectory': './js/trajectory',
          'util': './js/util',
          'view': './js/view',
          'viewcontroller': './js/view-controller',
          'visibilitycontroller': './js/visibility-controller',
          'shapecontroller': './js/shape-controller',
          'shape-editor': './js/shape-editor',
          'shapes': './js/shapes',

          /* Tests */
          'test_plottable': '../../tests/javascript_tests/test_plottable',
          'test_animate': '../../tests/javascript_tests/test_animate',
          'test_color_view_controller': '../../tests/javascript_tests/test_color_view_controller',
          'test_scale_view_controller': '../../tests/javascript_tests/test_scale_view_controller',
          'test_decomposition_model': '../../tests/javascript_tests/test_decomposition_model',
          'test_decomposition_view': '../../tests/javascript_tests/test_decomposition_view',
          'test_draw': '../../tests/javascript_tests/test_draw',
          'test_plottable': '../../tests/javascript_tests/test_plottable',
          'test_sceneplotview3d': '../../tests/javascript_tests/test_sceneplotview3d',
          'test_trajectory': '../../tests/javascript_tests/test_trajectory',
          'test_util': '../../tests/javascript_tests/test_util',
          'test_view_controller': '../../tests/javascript_tests/test_view_controller',
          'test_visibility_controller': '../../tests/javascript_tests/test_visibility_controller',
          'test_shape_controller': '../../tests/javascript_tests/test_shape_controller',
          'test_axes_controller': '../../tests/javascript_tests/test_axes_controller',
        },
        /*
           Libraries that are not AMD compatible need shim to declare their
           dependencies.
         */
        'shim': {
          'jquery_drag': {
            'deps': ['jquery', 'jqueryui']
          },
          'chosen': {
            'deps': ['jquery'],
            'exports': 'jQuery.fn.chosen'
          },
          'contextmenu' : {
            'deps': ['jquery', 'jqueryui', 'position']
          },
          'filesaver' : {
            'deps': ['blob']
          },
          'orbitcontrols': {
            'deps': ['three']
          },
          'projector': {
            'deps': ['three']
          },
          'svgrenderer': {
            'deps': ['orbitcontrols', 'projector']
          },
        'slickcore': ['jqueryui'],
        'slickgrid': ['slickcore', 'jquery_drag', 'slickformatters',
                      'slickeditors']
        }
      });

      //load tests using require
      require(
          ['jquery', 'chosen', 'spectrum', 'position', 'contextmenu',
           'underscore', 'chroma', 'three', 'orbitcontrols', 'projector',
           'svgrenderer', 'slickgrid', 'animate', 'color-editor',
           'colorviewcontroller', 'scaleviewcontroller', 'scale-editor',
           'controller', 'draw', 'model', 'scene3d', 'trajectory', 'util',
           'view', 'viewcontroller', 'visibilitycontroller',
           'shape-editor', 'shapes',

           'test_plottable', 'test_decomposition_model',
           'test_decomposition_view', 'test_view_controller',
           'test_color_view_controller', 'test_sceneplotview3d',
           'test_trajectory', 'test_animate', 'test_util',  'test_draw',
           'test_visibility_controller', 'test_shape_controller',
           'test_axes_controller'],
           /*
              Very important to always load all dependencies first, otherwise
              you might encounter problems with Qunit not running all tests.
            */
            function ($, chosen, spectrum, position,
                      contextmenu, underscore, chroma, three,
                      orbitcontrols, projector, svgrenderer, slickgrid,
                      animate, coloreditor, colorviewcontroller,
                      scaleviewcontroller, scaleeditor, controller,
                      draw, model, scene3d, trajectory, util, view,
                      viewcontroller, visibilitycontroller,
                      shapeeditor, shapes,

                      // test suites
                      test_plottable, test_decomposition_model,
                      test_decomposition_view, test_view_controller,
                      test_color_view_controller, test_sceneplotview3d,
                      test_trajectory, test_animate, test_util, test_ui,
                      test_draw, test_visibility_controller,
                      test_shape_controller, test_scale_view_controller,
                      test_axes_controller) {
              // now trigger the tests
              $( document ).ready(function() {
                QUnit.start();
              });
      });
    }, 10);
  </script>
</body>
</html>
