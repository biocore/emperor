/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/slickgrid@5.15.0/dist/browser/slick.dataview.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";(()=>{var t,e,i=Object.defineProperty,s=(t,e,s)=>((t,e,s)=>e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s)(t,"symbol"!=typeof e?e+"":e,s),l=Slick.Event,r=Slick.EventData,o=Slick.Group,h=Slick.GroupTotals,n=Slick.Utils,a=null!=(e=null==(t=Slick.Data)?void 0:t.GroupItemMetadataProvider)?e:{},d={Avg:class{constructor(t){s(this,"_nonNullCount",0),s(this,"_sum",0),s(this,"_field"),s(this,"_type","avg"),this._field=t}get field(){return this._field}get type(){return this._type}init(){this._nonNullCount=0,this._sum=0}accumulate(t){let e=null!=t&&t.hasOwnProperty(this._field)?t[this._field]:null;null!==e&&""!==e&&!isNaN(e)&&(this._nonNullCount++,this._sum+=parseFloat(e))}storeResult(t){(!t||void 0===t[this._type])&&(t[this._type]={}),0!==this._nonNullCount&&(t[this._type][this._field]=this._sum/this._nonNullCount)}},Min:class{constructor(t){s(this,"_min",null),s(this,"_field"),s(this,"_type","min"),this._field=t}get field(){return this._field}get type(){return this._type}init(){this._min=null}accumulate(t){let e=null!=t&&t.hasOwnProperty(this._field)?t[this._field]:null;null!==e&&""!==e&&!isNaN(e)&&(null===this._min||e<this._min)&&(this._min=parseFloat(e))}storeResult(t){(!t||void 0===t[this._type])&&(t[this._type]={}),t[this._type][this._field]=this._min}},Max:class{constructor(t){s(this,"_max",null),s(this,"_field"),s(this,"_type","max"),this._field=t}get field(){return this._field}get type(){return this._type}init(){this._max=null}accumulate(t){let e=null!=t&&t.hasOwnProperty(this._field)?t[this._field]:null;null!==e&&""!==e&&!isNaN(e)&&(null===this._max||e>this._max)&&(this._max=parseFloat(e))}storeResult(t){(!t||void 0===t[this._type])&&(t[this._type]={}),t[this._type][this._field]=this._max}},Sum:class{constructor(t){s(this,"_sum",0),s(this,"_field"),s(this,"_type","sum"),this._field=t}get field(){return this._field}get type(){return this._type}init(){this._sum=0}accumulate(t){let e=null!=t&&t.hasOwnProperty(this._field)?t[this._field]:null;null!==e&&""!==e&&!isNaN(e)&&(this._sum+=parseFloat(e))}storeResult(t){(!t||void 0===t[this._type])&&(t[this._type]={}),t[this._type][this._field]=this._sum}},Count:class{constructor(t){s(this,"_field"),s(this,"_type","count"),this._field=t}get field(){return this._field}get type(){return this._type}init(){}storeResult(t){(!t||void 0===t[this._type])&&(t[this._type]={}),t[this._type][this._field]=t.group.rows.length}}};window.Slick&&(window.Slick.Data=window.Slick.Data||{},window.Slick.Data.DataView=class{constructor(t,e){this.externalPubSub=e,s(this,"defaults",{globalItemMetadataProvider:null,groupItemMetadataProvider:null,inlineFilters:!1,useCSPSafeFilter:!1}),s(this,"idProperty","id"),s(this,"items",[]),s(this,"rows",[]),s(this,"idxById",new Map),s(this,"rowsById"),s(this,"filter",null),s(this,"filterCSPSafe",null),s(this,"updated",null),s(this,"suspend",!1),s(this,"isBulkSuspend",!1),s(this,"bulkDeleteIds",new Map),s(this,"sortAsc",!0),s(this,"fastSortField"),s(this,"sortComparer"),s(this,"refreshHints",{}),s(this,"prevRefreshHints",{}),s(this,"filterArgs"),s(this,"filteredItems",[]),s(this,"compiledFilter"),s(this,"compiledFilterCSPSafe"),s(this,"compiledFilterWithCaching"),s(this,"compiledFilterWithCachingCSPSafe"),s(this,"filterCache",[]),s(this,"_grid"),s(this,"groupingInfoDefaults",{getter:void 0,formatter:void 0,comparer:(t,e)=>t.value===e.value?0:t.value>e.value?1:-1,predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0,lazyTotalsCalculation:!1}),s(this,"groupingInfos",[]),s(this,"groups",[]),s(this,"toggledGroupsByLevel",[]),s(this,"groupingDelimiter",":|:"),s(this,"selectedRowIds",[]),s(this,"preSelectedRowIdsChangeFn"),s(this,"pagesize",0),s(this,"pagenum",0),s(this,"totalRows",0),s(this,"_options"),s(this,"_container"),s(this,"onBeforePagingInfoChanged"),s(this,"onGroupExpanded"),s(this,"onGroupCollapsed"),s(this,"onPagingInfoChanged"),s(this,"onRowCountChanged"),s(this,"onRowsChanged"),s(this,"onRowsOrCountChanged"),s(this,"onSelectedRowIdsChanged"),s(this,"onSetItemsCalled"),this.onBeforePagingInfoChanged=new l("onBeforePagingInfoChanged",e),this.onGroupExpanded=new l("onGroupExpanded",e),this.onGroupCollapsed=new l("onGroupCollapsed",e),this.onPagingInfoChanged=new l("onPagingInfoChanged",e),this.onRowCountChanged=new l("onRowCountChanged",e),this.onRowsChanged=new l("onRowsChanged",e),this.onRowsOrCountChanged=new l("onRowsOrCountChanged",e),this.onSelectedRowIdsChanged=new l("onSelectedRowIdsChanged",e),this.onSetItemsCalled=new l("onSetItemsCalled",e),this._options=n.extend(!0,{},this.defaults,t)}beginUpdate(t){this.suspend=!0,this.isBulkSuspend=!0===t}endUpdate(){let t=this.isBulkSuspend;this.isBulkSuspend=!1,this.suspend=!1,t&&(this.processBulkDelete(),this.ensureIdUniqueness()),this.refresh()}destroy(){this.items=[],this.idxById=null,this.rowsById=null,this.filter=null,this.filterCSPSafe=null,this.updated=null,this.sortComparer=null,this.filterCache=[],this.filteredItems=[],this.compiledFilter=null,this.compiledFilterCSPSafe=null,this.compiledFilterWithCaching=null,this.compiledFilterWithCachingCSPSafe=null,this._grid&&this._grid.onSelectedRowsChanged&&this._grid.onCellCssStylesChanged&&(this._grid.onSelectedRowsChanged.unsubscribe(),this._grid.onCellCssStylesChanged.unsubscribe()),this.onRowsOrCountChanged&&this.onRowsOrCountChanged.unsubscribe()}setRefreshHints(t){this.refreshHints=t}getFilterArgs(){return this.filterArgs}setFilterArgs(t){this.filterArgs=t}processBulkDelete(){if(!this.idxById)return;let t,e,i=0;for(let s=0,l=this.items.length;s<l;s++){if(e=this.items[s],t=e[this.idProperty],void 0===t)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");this.bulkDeleteIds.has(t)?this.idxById.delete(t):(this.items[i]=e,this.idxById.set(t,i),++i)}this.items.length=i,this.bulkDeleteIds=new Map}updateIdxById(t){if(this.isBulkSuspend||!this.idxById)return;let e;for(let i=t=t||0,s=this.items.length;i<s;i++){if(e=this.items[i][this.idProperty],void 0===e)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");this.idxById.set(e,i)}}ensureIdUniqueness(){if(this.isBulkSuspend||!this.idxById)return;let t;for(let e=0,i=this.items.length;e<i;e++)if(t=this.items[e][this.idProperty],void 0===t||this.idxById.get(t)!==e)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property")}getItems(){return this.items}getIdPropertyName(){return this.idProperty}setItems(t,e){void 0!==e&&(this.idProperty=e),this.items=this.filteredItems=t,this.onSetItemsCalled.notify({idProperty:this.idProperty,itemCount:this.items.length},null,this),this.idxById=new Map,this.updateIdxById(),this.ensureIdUniqueness(),this.refresh()}setPagingOptions(t){!1!==this.onBeforePagingInfoChanged.notify(this.getPagingInfo(),null,this).getReturnValue()&&(n.isDefined(t.pageSize)&&(this.pagesize=t.pageSize,this.pagenum=this.pagesize?Math.min(this.pagenum,Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1)):0),n.isDefined(t.pageNum)&&(this.pagenum=Math.min(t.pageNum,Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1))),this.onPagingInfoChanged.notify(this.getPagingInfo(),null,this),this.refresh())}getPagingInfo(){let t=this.pagesize?Math.max(1,Math.ceil(this.totalRows/this.pagesize)):1;return{pageSize:this.pagesize,pageNum:this.pagenum,totalRows:this.totalRows,totalPages:t,dataView:this}}sort(t,e){this.sortAsc=e,this.sortComparer=t,this.fastSortField=null,!1===e&&this.items.reverse(),this.items.sort(t),!1===e&&this.items.reverse(),this.idxById=new Map,this.updateIdxById(),this.refresh()}fastSort(t,e){this.sortAsc=e,this.fastSortField=t,this.sortComparer=null;let i=Object.prototype.toString;Object.prototype.toString="function"==typeof t?t:function(){return this[t]},!1===e&&this.items.reverse(),this.items.sort(),Object.prototype.toString=i,!1===e&&this.items.reverse(),this.idxById=new Map,this.updateIdxById(),this.refresh()}reSort(){this.sortComparer?this.sort(this.sortComparer,this.sortAsc):this.fastSortField&&this.fastSort(this.fastSortField,this.sortAsc)}getFilteredItems(){return this.filteredItems}getFilteredItemCount(){return this.filteredItems.length}getFilter(){return this._options.useCSPSafeFilter?this.filterCSPSafe:this.filter}setFilter(t){this.filterCSPSafe=t,this.filter=t,this._options.inlineFilters&&(this.compiledFilterCSPSafe=this.compileFilterCSPSafe,this.compiledFilterWithCachingCSPSafe=this.compileFilterWithCachingCSPSafe,this.compiledFilter=this.compileFilter(this._options.useCSPSafeFilter),this.compiledFilterWithCaching=this.compileFilterWithCaching(this._options.useCSPSafeFilter)),this.refresh()}getGrouping(){return this.groupingInfos}setGrouping(t){this._options.groupItemMetadataProvider||(this._options.groupItemMetadataProvider=new a),this.groups=[],this.toggledGroupsByLevel=[],t=t||[],this.groupingInfos=t instanceof Array?t:[t];for(let t=0;t<this.groupingInfos.length;t++){let e=this.groupingInfos[t]=n.extend(!0,{},this.groupingInfoDefaults,this.groupingInfos[t]);e.getterIsAFn="function"==typeof e.getter,e.compiledAccumulators=[];let i=e.aggregators.length;for(;i--;)e.compiledAccumulators[i]=this.compileAccumulatorLoopCSPSafe(e.aggregators[i]);this.toggledGroupsByLevel[t]={}}this.refresh()}getItemByIdx(t){return this.items[t]}getIdxById(t){var e;return null==(e=this.idxById)?void 0:e.get(t)}ensureRowsByIdCache(){if(!this.rowsById){this.rowsById={};for(let t=0,e=this.rows.length;t<e;t++)this.rowsById[this.rows[t][this.idProperty]]=t}}getRowByItem(t){var e;return this.ensureRowsByIdCache(),null==(e=this.rowsById)?void 0:e[t[this.idProperty]]}getRowById(t){var e;return this.ensureRowsByIdCache(),null==(e=this.rowsById)?void 0:e[t]}getItemById(t){return this.items[this.idxById.get(t)]}mapItemsToRows(t){var e;let i=[];this.ensureRowsByIdCache();for(let s=0,l=t.length;s<l;s++){let l=null==(e=this.rowsById)?void 0:e[t[s][this.idProperty]];n.isDefined(l)&&(i[i.length]=l)}return i}mapIdsToRows(t){var e;let i=[];this.ensureRowsByIdCache();for(let s=0,l=t.length;s<l;s++){let l=null==(e=this.rowsById)?void 0:e[t[s]];n.isDefined(l)&&(i[i.length]=l)}return i}mapRowsToIds(t){let e=[];for(let i=0,s=t.length;i<s;i++)if(t[i]<this.rows.length){let s=this.rows[t[i]];e[e.length]=s[this.idProperty]}return e}updateSingleItem(t,e){var i;if(this.idxById){if(!this.idxById.has(t))throw new Error("[SlickGrid DataView] Invalid id");if(t!==e[this.idProperty]){let s=e[this.idProperty];if(!n.isDefined(s))throw new Error("[SlickGrid DataView] Cannot update item to associate with a null id");if(this.idxById.has(s))throw new Error("[SlickGrid DataView] Cannot update item to associate with a non-unique id");this.idxById.set(s,this.idxById.get(t)),this.idxById.delete(t),null!=(i=this.updated)&&i[t]&&delete this.updated[t],t=s}this.items[this.idxById.get(t)]=e,this.updated||(this.updated={}),this.updated[t]=!0}}updateItem(t,e){this.updateSingleItem(t,e),this.refresh()}updateItems(t,e){if(t.length!==e.length)throw new Error("[SlickGrid DataView] Mismatch on the length of ids and items provided to update");for(let i=0,s=e.length;i<s;i++)this.updateSingleItem(t[i],e[i]);this.refresh()}insertItem(t,e){this.items.splice(t,0,e),this.updateIdxById(t),this.refresh()}insertItems(t,e){Array.prototype.splice.apply(this.items,[t,0].concat(e)),this.updateIdxById(t),this.refresh()}addItem(t){this.items.push(t),this.updateIdxById(this.items.length-1),this.refresh()}addItems(t){this.items=this.items.concat(t),this.updateIdxById(this.items.length-t.length),this.refresh()}deleteItem(t){if(this.idxById)if(this.isBulkSuspend)this.bulkDeleteIds.set(t,!0);else{let e=this.idxById.get(t);if(void 0===e)throw new Error("[SlickGrid DataView] Invalid id");this.idxById.delete(t),this.items.splice(e,1),this.updateIdxById(e),this.refresh()}}deleteItems(t){if(0!==t.length&&this.idxById)if(this.isBulkSuspend)for(let e=0,i=t.length;e<i;e++){let i=t[e];if(void 0===this.idxById.get(i))throw new Error("[SlickGrid DataView] Invalid id");this.bulkDeleteIds.set(i,!0)}else{let e=[];for(let i=0,s=t.length;i<s;i++){let s=t[i],l=this.idxById.get(s);if(void 0===l)throw new Error("[SlickGrid DataView] Invalid id");this.idxById.delete(s),e.push(l)}e.sort();for(let t=e.length-1;t>=0;--t)this.items.splice(e[t],1);this.updateIdxById(e[0]),this.refresh()}}sortedAddItem(t){if(!this.sortComparer)throw new Error("[SlickGrid DataView] sortedAddItem() requires a sort comparer, use sort()");this.insertItem(this.sortedIndex(t),t)}sortedUpdateItem(t,e){if(!this.idxById)return;if(!this.idxById.has(t)||t!==e[this.idProperty])throw new Error("[SlickGrid DataView] Invalid or non-matching id "+this.idxById.get(t));if(!this.sortComparer)throw new Error("[SlickGrid DataView] sortedUpdateItem() requires a sort comparer, use sort()");let i=this.getItemById(t);0!==this.sortComparer(i,e)?(this.deleteItem(t),this.sortedAddItem(e)):this.updateItem(t,e)}sortedIndex(t){let e=0,i=this.items.length;for(;e<i;){let s=e+i>>>1;-1===this.sortComparer(this.items[s],t)?e=s+1:i=s}return e}getItemCount(){return this.items.length}getLength(){return this.rows.length}getItem(t){var e;let i=this.rows[t];if(null==i||!i.__group||!i.totals||null!=(e=i.totals)&&e.initialized)null!=i&&i.__groupTotals&&!i.initialized&&this.calculateTotals(i);else{let t=this.groupingInfos[i.level];t.displayTotalsRow||(this.calculateTotals(i.totals),i.title=t.formatter?t.formatter(i):i.value)}return i}getItemMetadata(t){var e,i,s;let l=this.rows[t];return void 0===l?null:null!=(e=this._options.globalItemMetadataProvider)&&e.getRowMetadata?this._options.globalItemMetadataProvider.getRowMetadata(l,t):l.__group&&null!=(i=this._options.groupItemMetadataProvider)&&i.getGroupRowMetadata?this._options.groupItemMetadataProvider.getGroupRowMetadata(l,t):l.__groupTotals&&null!=(s=this._options.groupItemMetadataProvider)&&s.getTotalsRowMetadata?this._options.groupItemMetadataProvider.getTotalsRowMetadata(l,t):null}expandCollapseAllGroups(t,e){if(n.isDefined(t))this.toggledGroupsByLevel[t]={},this.groupingInfos[t].collapsed=e,!0===e?this.onGroupCollapsed.notify({level:t,groupingKey:null}):this.onGroupExpanded.notify({level:t,groupingKey:null});else for(let t=0;t<this.groupingInfos.length;t++)this.toggledGroupsByLevel[t]={},this.groupingInfos[t].collapsed=e,!0===e?this.onGroupCollapsed.notify({level:t,groupingKey:null}):this.onGroupExpanded.notify({level:t,groupingKey:null});this.refresh()}collapseAllGroups(t){this.expandCollapseAllGroups(t,!0)}expandAllGroups(t){this.expandCollapseAllGroups(t,!1)}expandCollapseGroup(t,e,i){this.toggledGroupsByLevel[t][e]=this.groupingInfos[t].collapsed^i,this.refresh()}collapseGroup(...t){let e,i,s=Array.prototype.slice.call(t)[0];1===t.length&&-1!==s.indexOf(this.groupingDelimiter)?(e=s,i=s.split(this.groupingDelimiter).length-1):(e=t.join(this.groupingDelimiter),i=t.length-1),this.expandCollapseGroup(i,e,!0),this.onGroupCollapsed.notify({level:i,groupingKey:e})}expandGroup(...t){let e,i,s=Array.prototype.slice.call(t)[0];1===t.length&&-1!==s.indexOf(this.groupingDelimiter)?(i=s.split(this.groupingDelimiter).length-1,e=s):(i=t.length-1,e=t.join(this.groupingDelimiter)),this.expandCollapseGroup(i,e,!1),this.onGroupExpanded.notify({level:i,groupingKey:e})}getGroups(){return this.groups}extractGroups(t,e){var i,s,l;let r,h,n,a=[],d={},g=e?e.level+1:0,u=this.groupingInfos[g];for(let t=0,n=null!=(s=null==(i=u.predefinedValues)?void 0:i.length)?s:0;t<n;t++)h=null==(l=u.predefinedValues)?void 0:l[t],r=d[h],r||(r=new o,r.value=h,r.level=g,r.groupingKey=(e?e.groupingKey+this.groupingDelimiter:"")+h,a[a.length]=r,d[h]=r);for(let i=0,s=t.length;i<s;i++)n=t[i],h=u.getterIsAFn?u.getter(n):n[u.getter],r=d[h],r||(r=new o,r.value=h,r.level=g,r.groupingKey=(e?e.groupingKey+this.groupingDelimiter:"")+h,a[a.length]=r,d[h]=r),r.rows[r.count++]=n;if(g<this.groupingInfos.length-1)for(let t=0;t<a.length;t++)r=a[t],r.groups=this.extractGroups(r.rows,r);return a.length&&this.addTotals(a,g),a.sort(this.groupingInfos[g].comparer),a}calculateTotals(t){var e,i,s;let l,r=t.group,o=this.groupingInfos[null!=(e=r.level)?e:0],h=r.level===this.groupingInfos.length,n=o.aggregators.length;if(!h&&o.aggregateChildGroups){let t=null!=(s=null==(i=r.groups)?void 0:i.length)?s:0;for(;t--;)r.groups[t].totals.initialized||this.calculateTotals(r.groups[t].totals)}for(;n--;)l=o.aggregators[n],l.init(),!h&&o.aggregateChildGroups?o.compiledAccumulators[n].call(l,r.groups):o.compiledAccumulators[n].call(l,r.rows),l.storeResult(t);t.initialized=!0}addGroupTotals(t){let e=this.groupingInfos[t.level],i=new h;i.group=t,t.totals=i,e.lazyTotalsCalculation||this.calculateTotals(i)}addTotals(t,e){var i,s;e=e||0;let l,r=this.groupingInfos[e],o=r.collapsed,h=this.toggledGroupsByLevel[e],n=t.length;for(;n--;)l=t[n],(!l.collapsed||r.aggregateCollapsed)&&(l.groups&&this.addTotals(l.groups,e+1),null!=(i=r.aggregators)&&i.length&&(r.aggregateEmpty||l.rows.length||null!=(s=l.groups)&&s.length)&&this.addGroupTotals(l),l.collapsed=o^h[l.groupingKey],l.title=r.formatter?r.formatter(l):l.value)}flattenGroupedRows(t,e){e=e||0;let i,s,l=this.groupingInfos[e],r=[],o=0;for(let h=0,n=t.length;h<n;h++){if(s=t[h],r[o++]=s,!s.collapsed){i=s.groups?this.flattenGroupedRows(s.groups,e+1):s.rows;for(let t=0,e=i.length;t<e;t++)r[o++]=i[t]}s.totals&&l.displayTotalsRow&&(!s.collapsed||l.aggregateCollapsed)&&(r[o++]=s.totals)}return r}compileAccumulatorLoopCSPSafe(t){return t.accumulate?function(e){let i;for(let s=0;s<e.length;s++){let l=e[s];i=t.accumulate.call(t,l)}return i}:function(){}}compileFilterCSPSafe(t,e){if("function"!=typeof this.filterCSPSafe)return[];let i=[],s=t.length;for(let l=0;l<s;l++)this.filterCSPSafe(t[l],e)&&i.push(t[l]);return i}compileFilter(t=!1){if(t)return null;let e=n.getFunctionDetails(this.filter),i="{ continue _coreloop; }$1",s="{ _retval[_idx++] = $item$; continue _coreloop; }$1",l=e.body.replace(/return false\s*([;}]|\}|$)/gi,i).replace(/return!1([;}]|\}|$)/gi,i).replace(/return true\s*([;}]|\}|$)/gi,s).replace(/return!0([;}]|\}|$)/gi,s).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),r=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");r=r.replace(/\$filter\$/gi,l),r=r.replace(/\$item\$/gi,e.params[0]),r=r.replace(/\$args\$/gi,e.params[1]);let o=new Function("_items,_args",r),h="compiledFilter";return o.displayName=h,o.name=this.setFunctionName(o,h),o}compileFilterWithCaching(t=!1){if(t)return null;let e=n.getFunctionDetails(this.filter),i="{ continue _coreloop; }$1",s="{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1",l=e.body.replace(/return false\s*([;}]|\}|$)/gi,i).replace(/return!1([;}]|\}|$)/gi,i).replace(/return true\s*([;}]|\}|$)/gi,s).replace(/return!0([;}]|\}|$)/gi,s).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),r=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");r=r.replace(/\$filter\$/gi,l),r=r.replace(/\$item\$/gi,e.params[0]),r=r.replace(/\$args\$/gi,e.params[1]);let o=new Function("_items,_args,_cache",r),h="compiledFilterWithCaching";return o.displayName=h,o.name=this.setFunctionName(o,h),o}compileFilterWithCachingCSPSafe(t,e,i){if("function"!=typeof this.filterCSPSafe)return[];let s=[],l=t.length;for(let r=0;r<l;r++)(i[r]||this.filterCSPSafe(t[r],e))&&s.push(t[r]);return s}setFunctionName(t,e){try{Object.defineProperty(t,"name",{writable:!0,value:e})}catch(i){t.name=e}}uncompiledFilter(t,e){var i;let s=[],l=0;for(let r=0,o=t.length;r<o;r++)null!=(i=this.filter)&&i.call(this,t[r],e)&&(s[l++]=t[r]);return s}uncompiledFilterWithCaching(t,e,i){var s;let l,r=[],o=0;for(let h=0,n=t.length;h<n;h++)l=t[h],i[h]?r[o++]=l:null!=(s=this.filter)&&s.call(this,l,e)&&(r[o++]=l,i[h]=!0);return r}getFilteredAndPagedItems(t){if(this._options.useCSPSafeFilter?this.filterCSPSafe:this.filter){let e,i;this._options.useCSPSafeFilter?(e=this._options.inlineFilters?this.compiledFilterCSPSafe:this.uncompiledFilter,i=this._options.inlineFilters?this.compiledFilterWithCachingCSPSafe:this.uncompiledFilterWithCaching):(e=this._options.inlineFilters?this.compiledFilter:this.uncompiledFilter,i=this._options.inlineFilters?this.compiledFilterWithCaching:this.uncompiledFilterWithCaching),this.refreshHints.isFilterNarrowing?this.filteredItems=e.call(this,this.filteredItems,this.filterArgs):this.refreshHints.isFilterExpanding?this.filteredItems=i.call(this,t,this.filterArgs,this.filterCache):this.refreshHints.isFilterUnchanged||(this.filteredItems=e.call(this,t,this.filterArgs))}else this.filteredItems=this.pagesize?t:t.concat();let e;return this.pagesize?(this.filteredItems.length<=this.pagenum*this.pagesize&&(0===this.filteredItems.length?this.pagenum=0:this.pagenum=Math.floor((this.filteredItems.length-1)/this.pagesize)),e=this.filteredItems.slice(this.pagesize*this.pagenum,this.pagesize*this.pagenum+this.pagesize)):e=this.filteredItems,{totalRows:this.filteredItems.length,rows:e}}getRowDiffs(t,e){var i,s,l;let r,o,h,n=[],a=0,d=Math.max(e.length,t.length);null!=(i=this.refreshHints)&&i.ignoreDiffsBefore&&(a=Math.max(0,Math.min(e.length,this.refreshHints.ignoreDiffsBefore))),null!=(s=this.refreshHints)&&s.ignoreDiffsAfter&&(d=Math.min(e.length,Math.max(0,this.refreshHints.ignoreDiffsAfter)));for(let i=a,s=t.length;i<d;i++)i>=s?n[n.length]=i:(r=e[i],o=t[i],(!r||this.groupingInfos.length&&(h=r.__nonDataRow||o.__nonDataRow)&&r.__group!==o.__group||r.__group&&!r.equals(o)||h&&(r.__groupTotals||o.__groupTotals)||r[this.idProperty]!==o[this.idProperty]||null!=(l=this.updated)&&l[r[this.idProperty]])&&(n[n.length]=i));return n}recalc(t){this.rowsById=void 0,(this.refreshHints.isFilterNarrowing!==this.prevRefreshHints.isFilterNarrowing||this.refreshHints.isFilterExpanding!==this.prevRefreshHints.isFilterExpanding)&&(this.filterCache=[]);let e=this.getFilteredAndPagedItems(t);this.totalRows=e.totalRows;let i=e.rows;this.groups=[],this.groupingInfos.length&&(this.groups=this.extractGroups(i),this.groups.length&&(i=this.flattenGroupedRows(this.groups)));let s=this.getRowDiffs(this.rows,i);return this.rows=i,s}refresh(){if(this.suspend)return;let t=n.extend(!0,{},this.getPagingInfo()),e=this.rows.length,i=this.totalRows,s=this.recalc(this.items);this.pagesize&&this.totalRows<this.pagenum*this.pagesize&&(this.pagenum=Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1),s=this.recalc(this.items)),this.updated=null,this.prevRefreshHints=this.refreshHints,this.refreshHints={},i!==this.totalRows&&!1!==this.onBeforePagingInfoChanged.notify(t,null,this).getReturnValue()&&this.onPagingInfoChanged.notify(this.getPagingInfo(),null,this),e!==this.rows.length&&this.onRowCountChanged.notify({previous:e,current:this.rows.length,itemCount:this.items.length,dataView:this,callingOnRowsChanged:s.length>0},null,this),s.length>0&&this.onRowsChanged.notify({rows:s,itemCount:this.items.length,dataView:this,calledOnRowCountChanged:e!==this.rows.length},null,this),(e!==this.rows.length||s.length>0)&&this.onRowsOrCountChanged.notify({rowsDiff:s,previousRowCount:e,currentRowCount:this.rows.length,itemCount:this.items.length,rowCountChanged:e!==this.rows.length,rowsChanged:s.length>0,dataView:this},null,this)}syncGridSelection(t,e,i){let s;this._grid=t,this.selectedRowIds=this.mapRowsToIds(t.getSelectedRows());let l=t=>{!1===t?this.selectedRowIds=[]:this.selectedRowIds.sort().join(",")!==t.sort().join(",")&&(this.selectedRowIds=t)};return t.onSelectedRowsChanged.subscribe(((t,e)=>{if(!s){let t=this.mapRowsToIds(e.rows),i={grid:this._grid,ids:t,rows:e.rows,added:!0,dataView:this};this.preSelectedRowIdsChangeFn(i),this.onSelectedRowIdsChanged.notify(Object.assign(i,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new r,this)}})),this.preSelectedRowIdsChangeFn=e=>{var r,o;if(!s){if(s=!0,void 0===e.added)l(e.ids);else{let s;if(e.added)s=i&&t.getOptions().multiSelect?(null==(r=this.selectedRowIds)?void 0:r.filter((t=>void 0===this.getRowById(t)))).concat(e.ids):e.ids;else if(i&&t.getOptions().multiSelect){let t=new Set(e.ids);s=null==(o=this.selectedRowIds)?void 0:o.filter((e=>!t.has(e)))}else s=[];l(s)}s=!1}},this.onRowsOrCountChanged.subscribe((()=>{if((this.selectedRowIds||[]).length>0&&!s){s=!0;let i=this.mapIdsToRows(this.selectedRowIds||[]);if(!e){let t={grid:this._grid,ids:this.mapRowsToIds(i),rows:i,dataView:this};this.preSelectedRowIdsChangeFn(t),this.onSelectedRowIdsChanged.notify(Object.assign(t,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new r,this)}t.setSelectedRows(i),s=!1}}).bind(this)),this.onSelectedRowIdsChanged}getAllSelectedIds(){return this.selectedRowIds}getAllSelectedFilteredIds(){return this.getAllSelectedFilteredItems().map((t=>t[this.idProperty]))}setSelectedIds(t,e){var i;let s=null==e?void 0:e.isRowBeingAdded,l=null==e?void 0:e.shouldTriggerEvent,o=null==e?void 0:e.applyRowSelectionToGrid;!1!==s&&(s=!0);let h=this.mapIdsToRows(t),n={grid:this._grid,ids:t,rows:h,added:s,dataView:this};null==(i=this.preSelectedRowIdsChangeFn)||i.call(this,n),!1!==l&&this.onSelectedRowIdsChanged.notify(Object.assign(n,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new r,this),!1!==o&&this._grid&&this._grid.setSelectedRows(h)}getAllSelectedItems(){let t=[];return this.getAllSelectedIds().forEach((e=>{t.push(this.getItemById(e))})),t}getAllSelectedFilteredItems(){if(!Array.isArray(this.selectedRowIds))return[];let t=new Set(this.selectedRowIds);return this.filteredItems.filter((e=>t.has(e[this.idProperty])))||[]}syncGridCellCssStyles(t,e){let i,s,l=t=>{i={},"object"==typeof t&&Object.keys(t).forEach((e=>{if(t){let s=this.rows[e][this.idProperty];i[s]=t[e]}}))};l(t.getCellCssStyles(e));let r=()=>{if("object"==typeof i){s=!0,this.ensureRowsByIdCache();let l={};Object.keys(i).forEach((t=>{var e;let s=null==(e=this.rowsById)?void 0:e[t];n.isDefined(s)&&(l[s]=i[t])})),t.setCellCssStyles(e,l),s=!1}};t.onCellCssStylesChanged.subscribe(((i,o)=>{s||e===o.key&&(o.hash?l(o.hash):(t.onCellCssStylesChanged.unsubscribe(),this.onRowsOrCountChanged.unsubscribe(r)))})),this.onRowsOrCountChanged.subscribe(r.bind(this))}},window.Slick.Data.Aggregators=d)})();
//# sourceMappingURL=/sm/0ce606144943ac68bfe0552e74bf796ee4b07e42e18579e09c70b37fe38d7c09.map